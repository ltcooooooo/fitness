{"ast":null,"code":"import Vue from \"vue\";\nimport axios from \"axios\";\nimport router from \"@/router/index\";\nimport { Toast, Dialog } from 'vant';\nimport { getToken, clearUser } from '@/utils/me';\nconst baseURL = \"http://192.168.61.183\"; //本地\n// const baseURL = \"http://47.97.172.119\"  //公网\n\nconst request = axios.create({\n  baseURL: baseURL,\n  timeout: 5000\n});\nrequest.interceptors.request.use(config => {\n  if (/^\\/admin/.test(config.url)) {\n    config.headers.Authorization = `Bearer ${getToken()}`;\n  }\n\n  console.log(\"config\", config);\n  Toast.loading({\n    message: '加载中...',\n    forbidClick: true\n  });\n  return config;\n});\nrequest.interceptors.response.use(response => {\n  console.log(\"response.data\", response.data);\n\n  if (response.data.status) {\n    if (response.data.message === \"登录成功\" || response.data.message === \"注册成功\") {\n      Toast.success('登录成功');\n    }\n  } else {\n    if (response.data.errmsg === \"token过期，请重新登录\") {\n      console.log(\"token过期，请重新登录8888888888888888\");\n      Dialog.alert({\n        title: '提示',\n        message: '登陆已过期，请重新登陆'\n      }).then(() => {\n        clearUser();\n        router.replace(\"/login\");\n      });\n    }\n  }\n\n  Toast.clear();\n  return response;\n}, error => {\n  if (error) Toast.fail('失败');\n  return Promise.reject(\"请求失败\");\n});\nexport default request;","map":{"version":3,"names":["Vue","axios","router","Toast","Dialog","getToken","clearUser","baseURL","request","create","timeout","interceptors","use","config","test","url","headers","Authorization","console","log","loading","message","forbidClick","response","data","status","success","errmsg","alert","title","then","replace","clear","error","fail","Promise","reject"],"sources":["C:/Users/user/Desktop/fitness/view/src/api/request.js"],"sourcesContent":["import Vue from \"vue\"\r\nimport axios from \"axios\"\r\nimport router from \"@/router/index\"\r\nimport { Toast, Dialog } from 'vant';\r\nimport { getToken, clearUser } from '@/utils/me'\r\n\r\n\r\nconst baseURL = \"http://192.168.61.183\"   //本地\r\n// const baseURL = \"http://47.97.172.119\"  //公网\r\n\r\nconst request = axios.create({\r\n    baseURL: baseURL,\r\n    timeout: 5000\r\n});\r\nrequest.interceptors.request.use(config => {\r\n    if (/^\\/admin/.test(config.url)) {\r\n        config.headers.Authorization = `Bearer ${getToken()}`\r\n    }\r\n    console.log(\"config\", config)\r\n    Toast.loading({\r\n        message: '加载中...',\r\n        forbidClick: true,\r\n    })\r\n    return config\r\n})\r\n\r\nrequest.interceptors.response.use(response => {\r\n    console.log(\"response.data\", response.data)\r\n    if (response.data.status) {\r\n        if (response.data.message === \"登录成功\" || response.data.message === \"注册成功\") {\r\n            Toast.success('登录成功');\r\n        }\r\n    } else {\r\n        if (response.data.errmsg === \"token过期，请重新登录\") {\r\n            console.log(\"token过期，请重新登录8888888888888888\")\r\n            Dialog.alert({\r\n                title: '提示',\r\n                message: '登陆已过期，请重新登陆',\r\n            }).then(() => {\r\n                clearUser()\r\n                router.replace(\"/login\")\r\n            })\r\n        }\r\n    }\r\n    Toast.clear()\r\n    return response\r\n}, (error) => {\r\n    if (error) Toast.fail('失败');\r\n    return Promise.reject(\"请求失败\");\r\n})\r\n\r\n\r\nexport default request"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,MAA9B;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,YAApC;AAGA,MAAMC,OAAO,GAAG,uBAAhB,C,CAA0C;AAC1C;;AAEA,MAAMC,OAAO,GAAGP,KAAK,CAACQ,MAAN,CAAa;EACzBF,OAAO,EAAEA,OADgB;EAEzBG,OAAO,EAAE;AAFgB,CAAb,CAAhB;AAIAF,OAAO,CAACG,YAAR,CAAqBH,OAArB,CAA6BI,GAA7B,CAAiCC,MAAM,IAAI;EACvC,IAAI,WAAWC,IAAX,CAAgBD,MAAM,CAACE,GAAvB,CAAJ,EAAiC;IAC7BF,MAAM,CAACG,OAAP,CAAeC,aAAf,GAAgC,UAASZ,QAAQ,EAAG,EAApD;EACH;;EACDa,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBN,MAAtB;EACAV,KAAK,CAACiB,OAAN,CAAc;IACVC,OAAO,EAAE,QADC;IAEVC,WAAW,EAAE;EAFH,CAAd;EAIA,OAAOT,MAAP;AACH,CAVD;AAYAL,OAAO,CAACG,YAAR,CAAqBY,QAArB,CAA8BX,GAA9B,CAAkCW,QAAQ,IAAI;EAC1CL,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BI,QAAQ,CAACC,IAAtC;;EACA,IAAID,QAAQ,CAACC,IAAT,CAAcC,MAAlB,EAA0B;IACtB,IAAIF,QAAQ,CAACC,IAAT,CAAcH,OAAd,KAA0B,MAA1B,IAAoCE,QAAQ,CAACC,IAAT,CAAcH,OAAd,KAA0B,MAAlE,EAA0E;MACtElB,KAAK,CAACuB,OAAN,CAAc,MAAd;IACH;EACJ,CAJD,MAIO;IACH,IAAIH,QAAQ,CAACC,IAAT,CAAcG,MAAd,KAAyB,eAA7B,EAA8C;MAC1CT,OAAO,CAACC,GAAR,CAAY,+BAAZ;MACAf,MAAM,CAACwB,KAAP,CAAa;QACTC,KAAK,EAAE,IADE;QAETR,OAAO,EAAE;MAFA,CAAb,EAGGS,IAHH,CAGQ,MAAM;QACVxB,SAAS;QACTJ,MAAM,CAAC6B,OAAP,CAAe,QAAf;MACH,CAND;IAOH;EACJ;;EACD5B,KAAK,CAAC6B,KAAN;EACA,OAAOT,QAAP;AACH,CApBD,EAoBIU,KAAD,IAAW;EACV,IAAIA,KAAJ,EAAW9B,KAAK,CAAC+B,IAAN,CAAW,IAAX;EACX,OAAOC,OAAO,CAACC,MAAR,CAAe,MAAf,CAAP;AACH,CAvBD;AA0BA,eAAe5B,OAAf"},"metadata":{},"sourceType":"module"}